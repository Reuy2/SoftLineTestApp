#pragma checksum "C:\Users\macs1\source\repos\SoftLineTestApp\Views\Home\Tasks.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1ff027036910e44b3dc4e9fa475a49274817c093"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Tasks), @"mvc.1.0.view", @"/Views/Home/Tasks.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\macs1\source\repos\SoftLineTestApp\Views\_ViewImports.cshtml"
using SoftLineTestApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\macs1\source\repos\SoftLineTestApp\Views\_ViewImports.cshtml"
using SoftLineTestApp.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1ff027036910e44b3dc4e9fa475a49274817c093", @"/Views/Home/Tasks.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"80a739e8998da665fd48ab27e67e94972ab4e385", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Tasks : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("addForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("onsubmit", new global::Microsoft.AspNetCore.Html.HtmlString("submitAddDialog(this);return false"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("editForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("onsubmit", new global::Microsoft.AspNetCore.Html.HtmlString("submitEditDialog(this);return false"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Users\macs1\source\repos\SoftLineTestApp\Views\Home\Tasks.cshtml"
  
    ViewData["Title"] = "Home Page";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""text-center"">

    <dialog id=""okAdd"">
        <p>Задача добавлена</p>
        <button onclick=""window.okAdd.close()"">Закрыть</button>
    </dialog>

    <dialog id=""errAdd"">
        <p>Задача не добавлена</p>
        <button onclick=""window.errAdd.close()"">Закрыть</button>
    </dialog>

    <dialog id=""okDel"">
        <p>Задача удалена</p>
        <button onclick=""window.okDel.close()"">Закрыть</button>
    </dialog>

    <dialog id=""errDel"">
        <p>Задача не удалена</p>
        <button onclick=""window.errDel.close()"">Закрыть</button>
    </dialog>

    <dialog id=""okEdit"">
        <p>Задача обновлена</p>
        <button onclick=""window.okEdit.close()"">Закрыть</button>
    </dialog>

    <dialog id=""errEdit"">
        <p>Задача не обновлена</p>
        <button onclick=""window.errEdit.close()"">Закрыть</button>
    </dialog>

    <dialog id=""choiceRow"">
        <p>Выберите строку</p>
        <button onclick=""window.choiceRow.close()"">Закрыть</button>
    </di");
            WriteLiteral("alog>\r\n\r\n\r\n    <button type=\"button\" onclick=\"window.addDialog.showModal()\">\r\n        Добавить\r\n    </button>\r\n\r\n    <dialog id=\"addDialog\">\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1ff027036910e44b3dc4e9fa475a49274817c0936796", async() => {
                WriteLiteral("\r\n\r\n            <p>Введите имя задачи:</p>\r\n            <input type=\"text\" name=\"name\"");
                BeginWriteAttribute("value", " value=\"", 1384, "\"", 1392, 0);
                EndWriteAttribute();
                WriteLiteral(" required />\r\n\r\n            <p>Введите описание задачи:</p>\r\n            <input type=\"text\" name=\"description\"");
                BeginWriteAttribute("value", " value=\"", 1503, "\"", 1511, 0);
                EndWriteAttribute();
                WriteLiteral(" required />\r\n\r\n            <p>Выберите статус задачи задачи:</p>\r\n            <select id=\"statusesName\" name=\"statusId\" required>\r\n                ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1ff027036910e44b3dc4e9fa475a49274817c0937734", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_0.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\r\n            </select>\r\n\r\n            <p></p>\r\n            <button type=\"submit\">Добавить задачу</button>\r\n\r\n        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        <button type=\"button\" onclick=\"window.addDialog.close()\"> Закрыть </button>\r\n    </dialog>\r\n\r\n    <button onclick=\"deleteGoal()\">Удалить</button>\r\n\r\n    <button onclick=\"editGoal()\">Изменить</button>\r\n\r\n    <dialog id=\"editDialog\">\r\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "1ff027036910e44b3dc4e9fa475a49274817c09310654", async() => {
                WriteLiteral("\r\n\r\n            <p>Введите имя задачи:</p>\r\n            <input id=\"editName\" type=\"text\" name=\"name\"");
                BeginWriteAttribute("value", " value=\"", 2243, "\"", 2251, 0);
                EndWriteAttribute();
                WriteLiteral(" required />\r\n\r\n            <p>Введите описание задачи:</p>\r\n            <input id=\"editDescription\" type=\"text\" name=\"description\"");
                BeginWriteAttribute("value", " value=\"", 2383, "\"", 2391, 0);
                EndWriteAttribute();
                WriteLiteral(" required />\r\n\r\n            <p>Выберите статус задачи задачи:</p>\r\n            <select id=\"editStatusesName\" name=\"statusId\" required>\r\n\r\n            </select>\r\n\r\n            <p></p>\r\n            <button type=\"submit\">Изменить задачу</button>\r\n\r\n        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_5);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
        <button type=""button"" onclick=""window.editDialog.close()""> Закрыть </button>
    </dialog>

    <div id=""goals"" style=""display:contents"">
        <table class=""table"">
            <thead>
                <tr>
                    <th>Имя</th>
                    <th>Описание</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>

<style>
    .table {
        width: 100%;
        margin-bottom: 1rem;
        color: #212529;
        border-collapse: collapse;
    }

    .table tbody tr:hover{
        background-color: lightgray;
    }

    .selectedRow{
        background-color: gray!important;
    }
</style>

");
            DefineSection("Scripts", async() => {
                WriteLiteral(@" 
    <script>
        var currentSelectedRow;

        //изменение задачи
        function editGoal() {
            if (currentSelectedRow == null) {
                window.choiceRow.showModal()
                return
            }

            var statuses = document.getElementById('editStatusesName')
            var editName = document.getElementById('editName')
            var editDescription = document.getElementById('editDescription')

            var goalStatusId = currentSelectedRow.cells[2].getAttribute('data-id')
            $.each(statuses, function (index, item) {
                if (goalStatusId == item.value) {
                    item.setAttribute('selected', true);
                }
            })

            editName.value = currentSelectedRow.cells[0].innerHTML
            editDescription.value = currentSelectedRow.cells[1].innerHTML
            console.log(currentSelectedRow.cells[0].getAttribute('data-goalId'))

            window.editDialog.showModal()
        ");
                WriteLiteral(@"}

        function submitEditDialog(form) {
            let goal = {
                id: currentSelectedRow.cells[0].getAttribute('data-goalId'),
                name: form.name.value,
                description: form.description.value,
                statusId: form.statusId.value
            }

            $.ajax({
                type: 'POST',
                url: '/api/editGoal',
                dataType: 'json',
                data: goal,
                success: function (response) {
                    currentSelectedRow.cells[0].innerHTML = response.name
                    currentSelectedRow.cells[1].innerHTML = response.description
                    currentSelectedRow.cells[2].innerHTML = response.status.statusName
                    currentSelectedRow.cells[2].setAttribute('data-id',response.statusId)

                    clearAllSelectedTr()

                    window.editDialog.close()

                    window.okEdit.showModal()
                },
            ");
                WriteLiteral(@"    error: function (req, status, error) {
                    console.log(error)
                    window.editDialog.close()
                    window.errEdit.showModal()
                }
            });

            window.addDialog.close()
        }

        //удаление задачи
        function deleteGoal() {
            if (currentSelectedRow == null) {
                window.choiceRow.showModal()
                return
            }

            let goal = {
                name: currentSelectedRow.cells[0].innerHTML,
                description: currentSelectedRow.cells[1].innerHTML,
                statusId: currentSelectedRow.cells[2].getAttribute('data-id')
            }

            $.ajax({
                type: 'POST',
                url: '/api/deleteGoal',
                dataType: 'json',
                data: goal,
                success: function (response) {
                    window.okDel.showModal()
                    currentSelectedRow.parentNode.removeC");
                WriteLiteral(@"hild(currentSelectedRow)
                },
                error: function (req, status, error) {
                    console.log(error)
                    window.errDel.showModal()
                }
            })
        }
        //Выбор строки в таблице
        function SelectRow(currenttr) {
            //Очистить все выделения
            if (currenttr.className == 'selectedRow') {
                currenttr.className = ''
                currentSelectedRow = null
            }
            else {
                clearAllSelectedTr()

                currenttr.className = 'selectedRow'
                currentSelectedRow = currenttr
            }
        };
        //очистка выбора строки в таблице
        function clearAllSelectedTr() {
            var tableRows = document.querySelector('#goals').querySelectorAll('tr');
            currentSelectedRow = null
            $.each(tableRows, function (index, row) {
                row.className = ''
            })
        }
    ");
                WriteLiteral(@"    //Добавление задачи
        function submitAddDialog(form) {
            $.ajax({
                type: 'POST',
                url: '/api/addGoal',
                dataType: 'json',
                data: $('#addForm').serialize(),
                success: function (response) {
                    console.log(response)
                    $('#goals tbody').append(
                        '<tr class=""tableHover"" onmousedown=""SelectRow(this);"" ><td data-goalId='+ response.id +'>' + response.name +
                        '</td><td>' + response.description +
                        '</td><td data-id='+ response.statusId +'>' + response.status.statusName +
                        '</td></tr>'
                    )

                    clearAllSelectedTr()

                    window.okAdd.showModal()
                },
                error: function (req, status, error) {
                    console.log(error)
                    window.errAdd.showModal()
                }
           ");
                WriteLiteral(@" });

            window.addDialog.close()
        }

        //Получение всех задач
        $.ajax({
            type: 'GET',
            url: '/api/getGoals',
            dataType: 'json',
            success: function (response) {
                console.log(response)
                $(response).each(function (index, item) {

                    $('#goals tbody').append(
                        '<tr class=""tableHover"" onmousedown=""SelectRow(this);"" ><td data-goalId=' + item.id +'>' + item.name +
                        '</td><td>' + item.description +
                        '</td><td data-id=' + item.statusId +'>' + item.status.statusName +
                        '</td></tr>'
                    )

                });
            },
            error: function (req, status, error) {
                console.log(error)
            }
        });

        //Ajax для получения статусов для окна добавления
        $.ajax({
            type: 'GET',
            url: 'http://localho");
                WriteLiteral(@"st:5000/api/getStatuses',
            dataType: 'json',
            success: function (response) {
                console.log(response)
                $(response).each(function (index, item) {

                    $('#statusesName').append(
                        '<option value=""' + item.id + '"">' + item.statusName +'</option>'
                    )

                });
            },
            error: function (req, status, error) {
                console.log(error)
            }
        });

        //Ajax получение статусов для окна изменения задач
        $.ajax({
            type: 'GET',
            url: 'http://localhost:5000/api/getStatuses',
            dataType: 'json',
            success: function (response) {
                console.log(response)
                $(response).each(function (index, item) {

                    $('#editStatusesName').append(
                        '<option value=""' + item.id + '"">' + item.statusName + '</option>'
                    )");
                WriteLiteral("\r\n\r\n                });\r\n            },\r\n            error: function (req, status, error) {\r\n                console.log(error)\r\n            }\r\n        });\r\n    </script>\r\n");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
